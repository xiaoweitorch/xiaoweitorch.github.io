<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="笔记记录">
<meta property="og:type" content="website">
<meta property="og:title" content="Something">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Something">
<meta property="og:description" content="笔记记录">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Leading Werido">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Something</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?67bd87d41cd1946187174362f966b76e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Something</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/20/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0031%E6%A0%91%E8%8A%82%E7%82%B9%E7%9A%84%E7%AC%ACk%E4%B8%AA%E7%A5%96%E5%85%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Leading Werido">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/20/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0031%E6%A0%91%E8%8A%82%E7%82%B9%E7%9A%84%E7%AC%ACk%E4%B8%AA%E7%A5%96%E5%85%88/" class="post-title-link" itemprop="url">0031 树节点的第k个祖先</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-20 19:19:00 / 修改时间：19:20:07" itemprop="dateCreated datePublished" datetime="2020-06-20T19:19:00+08:00">2020-06-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/" itemprop="url" rel="index"><span itemprop="name">每天一道算法题</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/06/20/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0031%E6%A0%91%E8%8A%82%E7%82%B9%E7%9A%84%E7%AC%ACk%E4%B8%AA%E7%A5%96%E5%85%88/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/20/每天一道算法题/0031树节点的第k个祖先/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <font size=8>树节点的第k个祖先</font>

<blockquote>
<p>编号：0031</p>
<p>试题来源：<a href="https://leetcode-cn.com/problems/kth-ancestor-of-a-tree-node/" target="_blank" rel="noopener">leetcode</a></p>
<p>my blog:<a href="https://leadingwerido.com" target="_blank" rel="noopener">Something</a></p>
</blockquote>
<h1 id="试题描述"><a href="#试题描述" class="headerlink" title="试题描述"></a>试题描述</h1><p>给定一棵树，树上有<code>n</code>个节点，按照从<code>0</code>到<code>n-1</code>进行编号。树以父节点数组的形式给出，其中<code>parent[i]</code>是节点<code>i</code>的父节点。树的根节点是编号为0的节点。其中<code>parent[0]=-1</code>表示其没有父节点。</p>
<p>请设计并实现<code>getKthAncestor(int node, int k)</code>函数，返回值为节点<code>node</code>的第<code>k</code>个祖先节点。若不存在，则返回<code>-1</code>。</p>
<p>树节点的第<code>k</code>个祖先节点是从该节点到根节点路径上的第<code>k</code>个节点。</p>
<blockquote>
<p>限制：</p>
<ul>
<li>$1\leq k\leq n\leq 5*10^4$</li>
<li>parent[0]==-1表示编号为0的节点是根节点</li>
<li>对于所有的$0&lt;i&lt;n$，$0\leq parent[i] &lt;n$总成立</li>
<li>$0\leq node&lt;n$</li>
<li>至多查询$5*10^4$次</li>
</ul>
</blockquote>
<h1 id="解答算法"><a href="#解答算法" class="headerlink" title="解答算法"></a>解答算法</h1><h2 id="暴力法"><a href="#暴力法" class="headerlink" title="暴力法"></a>暴力法</h2><h3 id="算法思路"><a href="#算法思路" class="headerlink" title="算法思路"></a>算法思路</h3><p>很显然，最简单的方法就是进行递归调用<code>getKthAncestor</code>函数，我们要查找<code>node</code>的第k个父节点，也就是找<code>node</code>的父节点的第<code>k-1</code>个父节点，也就是调用<code>getKthAncestor(parent[node],k-1)</code>。</p>
<p>递归调用的终止条件要么是<code>k==0</code>，说明当前节点就是返回值，要么是<code>parent[node]==-1</code>,说明查询不到满足条件的，返回<code>-1</code>。</p>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeAncestor</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> size;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; parent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    TreeAncestor(<span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; parent) &#123;</span><br><span class="line">    	size = n;</span><br><span class="line">    	<span class="keyword">this</span>-&gt;parent = parent;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getKthAncestor</span><span class="params">(<span class="keyword">int</span> node, <span class="keyword">int</span> k)</span> </span>&#123;  <span class="comment">//递归调用</span></span><br><span class="line">    	<span class="keyword">if</span>(k == <span class="number">0</span>)</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="keyword">return</span> node;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">if</span>(node == <span class="number">0</span>)</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> getKthAncestor(parent[node], k - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><blockquote>
<ul>
<li>时间复杂度：最坏情况下，要遍历整个深度，因此时间复杂度为$O(n)$</li>
<li>空间复杂度：递归调用要使用栈空间，栈空间占用也为$O(n)$</li>
</ul>
</blockquote>
<h2 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h2><h3 id="算法思路-1"><a href="#算法思路-1" class="headerlink" title="算法思路"></a>算法思路</h3><p>利用动态规划的思路，建立一个辅助的二维数组<code>dp</code>，其中<code>dp[0][i]</code>存放的是节点<code>i</code>的第$2^0$个父节点，也即<code>parent[i]</code>。</p>
<p>显然<code>dp[i][j]</code>的定义为节点<code>j</code>的第$2^i$个父节点，因此显然递推公式有</p>
<script type="math/tex; mode=display">
dp[i][j] = dp[i-1][dp[i-1][j]]</script><p>然后就可以利用这个对我们要查找的第<code>k</code>个祖先节点进行拆分，将其划分成二进制数，然后依次进行寻找，例如我们要找寻第3个父节点，也就是使用<code>dp[dp[i][1]][0]</code>。</p>
<h3 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeAncestor</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">int</span> size;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; dp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    TreeAncestor(<span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; parent) &#123;</span><br><span class="line">    	<span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">    	<span class="keyword">this</span>-&gt;n = n;</span><br><span class="line">    	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    	dp.push_back(parent);</span><br><span class="line">    	<span class="keyword">while</span>(flag)</span><br><span class="line">    	&#123;</span><br><span class="line">    		flag = <span class="number">0</span>;</span><br><span class="line">    		<span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">tmp</span><span class="params">(n)</span></span>;</span><br><span class="line">    		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j)</span><br><span class="line">    		&#123;</span><br><span class="line">    			<span class="keyword">if</span>(dp[i][j] != <span class="number">-1</span>)</span><br><span class="line">    			&#123;</span><br><span class="line">    				tmp[j] = dp[i][dp[i][j]];</span><br><span class="line">    			&#125;</span><br><span class="line">    			<span class="keyword">else</span></span><br><span class="line">    			&#123;</span><br><span class="line">    				tmp[j] = <span class="number">-1</span>;</span><br><span class="line">    			&#125;</span><br><span class="line">    			<span class="keyword">if</span>(tmp[j] != <span class="number">-1</span>)</span><br><span class="line">    			&#123;</span><br><span class="line">    				flag = <span class="number">1</span>;</span><br><span class="line">    			&#125;</span><br><span class="line">    		&#125;</span><br><span class="line">    		dp.push_back(tmp);</span><br><span class="line">    		++i;</span><br><span class="line">    	&#125;</span><br><span class="line">    	size = dp.size();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getKthAncestor</span><span class="params">(<span class="keyword">int</span> node, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> i = size;</span><br><span class="line">    	<span class="keyword">int</span> result = node;</span><br><span class="line">    	<span class="keyword">while</span>(k)</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="keyword">if</span>(k == <span class="number">0</span>)</span><br><span class="line">    		&#123;</span><br><span class="line">    			<span class="keyword">return</span> result;</span><br><span class="line">    		&#125;</span><br><span class="line">    		<span class="keyword">if</span>(k &gt;= <span class="built_in">pow</span>(<span class="number">2</span>,i - <span class="number">1</span>))</span><br><span class="line">    		&#123;</span><br><span class="line">    			result = dp[i - <span class="number">1</span>][result];</span><br><span class="line">    			k -= <span class="built_in">pow</span>(<span class="number">2</span>,i - <span class="number">1</span>);</span><br><span class="line">    		&#125;</span><br><span class="line">    		<span class="keyword">if</span>(result == <span class="number">-1</span>)</span><br><span class="line">    		&#123;</span><br><span class="line">    			<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    		&#125;</span><br><span class="line">    		--i;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="复杂度分析-1"><a href="#复杂度分析-1" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><blockquote>
<ul>
<li>时间复杂度：因为用到了二分查找，所以只用进行$log(n)$次搜索</li>
<li>空间复杂度：整个过程用了一个dp数组进行存放，空间复杂度$nlog(n)$</li>
</ul>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/03%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Leading Werido">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/03%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84/" class="post-title-link" itemprop="url">计算机组成原理/03系统总线/总线结构</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-20 14:58:33 / 修改时间：15:24:32" itemprop="dateCreated datePublished" datetime="2020-06-20T14:58:33+08:00">2020-06-20</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/06/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/03%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/20/计算机组成原理/03系统总线/总线结构/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>578</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <font size=8>总线结构</font>

<blockquote>
<p>my blog:<a href="https://leadingwerido.com" target="_blank" rel="noopener">Something</a></p>
</blockquote>
<p>总线结构通常分为单总线和多总线结构两种</p>
<h1 id="单总线结构"><a href="#单总线结构" class="headerlink" title="单总线结构"></a>单总线结构</h1><p><img src="https://i.loli.net/2020/06/19/zamNAeC6Fb7sOcZ.jpg" alt="单总线结构.jpg"></p>
<p>将CPU、主存、I/O设备都挂在系统总线上，允许它们之间<strong>直接交换信息</strong></p>
<ul>
<li><p>优点：结构简单，便于扩充</p>
</li>
<li><p>缺点：所有的信息传送都经过一条总线，形成计算机系统的瓶颈，影响效率</p>
</li>
<li>主要应用范围：小型计算机或微型计算机</li>
</ul>
<p>当数据传输需求量和传输速度要求不太高的情况下，为克服<strong>总线瓶颈</strong>的问题，尽可能采用<strong>增加总线宽度和提高传输速率</strong>来解决。</p>
<h1 id="多总线结构"><a href="#多总线结构" class="headerlink" title="多总线结构"></a>多总线结构</h1><h2 id="双总线结构"><a href="#双总线结构" class="headerlink" title="双总线结构"></a>双总线结构</h2><p><img src="https://i.loli.net/2020/06/20/rRiwoZPBkqHdAj5.jpg" alt="双总线结构.jpg"></p>
<p>特点：将速度较低的I/O设备从单总线上分离，形成<strong>主存总线和I/O总线分开的结构</strong></p>
<p><strong>通道</strong>：是具有特殊功能的<strong>处理器</strong>，具有CPU的一部分功能，对I/O设备可以同一管理，<strong>增大了系统的吞吐能力</strong></p>
<h2 id="三总线结构"><a href="#三总线结构" class="headerlink" title="三总线结构"></a>三总线结构</h2><p>特点：将速率不同的I/O设备进行分类，连接在不同的通道上，<strong>提高计算机系统的工作效率</strong></p>
<p>==任一时刻只能使用一种总线==</p>
<ul>
<li><p>形式1</p>
<p><img src="https://i.loli.net/2020/06/20/BaKMrg7jkSU4OsW.jpg" alt="三总线结构1.jpg"></p>
<p>主存总线：连接CPU与主存</p>
<p>I/O总线：连接CPU和各类I/O设备</p>
<p>DMA总线：用于<strong>高速</strong>I/O设备与主存交换信息</p>
<p>主存总线和DMA总线不能同时对主存操作</p>
</li>
<li><p>形式2</p>
<p><img src="https://i.loli.net/2020/06/20/TWFZG9Hla2VnPkd.jpg" alt="三总线结构2.jpg"></p>
<p>局部总线：连接处理器和Cache</p>
<p>而且Cache不仅和局部总线相连，也和系统总线相连</p>
<p>拓展总线：通过拓展总线接口和系统总线相连，提高效率。</p>
</li>
</ul>
<h2 id="四总线结构"><a href="#四总线结构" class="headerlink" title="四总线结构"></a>四总线结构</h2><p><img src="https://i.loli.net/2020/06/20/wd6F19rZIxcukJA.jpg" alt="四总线结构.jpg"></p>
<p>特点：增加了和计算机系统相连紧密的高速总线，挂载了高速I/O设备</p>
<blockquote>
<p> 对高速设备来说，自身工作很少依赖CPU，同时又更贴近CPU，会提高工作效率 </p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/03%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF%E7%89%B9%E6%80%A7%E5%8F%8A%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Leading Werido">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/03%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF%E7%89%B9%E6%80%A7%E5%8F%8A%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/" class="post-title-link" itemprop="url">总线特性及性能指标</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-19 22:17:00 / 修改时间：22:17:44" itemprop="dateCreated datePublished" datetime="2020-06-19T22:17:00+08:00">2020-06-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/" itemprop="url" rel="index"><span itemprop="name">系统总线</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/06/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/03%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF%E7%89%B9%E6%80%A7%E5%8F%8A%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/19/计算机组成原理/03系统总线/总线特性及性能指标/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <font size= 8>总线特性及性能指标</font>

<blockquote>
<p>my blog:<a href="https://leadingwerido.com" target="_blank" rel="noopener">Something</a></p>
</blockquote>
<h1 id="总线特性"><a href="#总线特性" class="headerlink" title="总线特性"></a>总线特性</h1><p>总线实际上是由许多导线直接印制在电路板上的。</p>
<p><img src="https://i.loli.net/2020/06/19/mo8NqdVQaIDiruv.jpg" alt="总线结构的物理实现.jpg"></p>
<p>为了保证总线的可靠连接与使用，因此规定了总线的特性。</p>
<ul>
<li><p>机械特性：总线在<strong>机械连接</strong>方式上的一些性能，如插头与插座的使用标准等</p>
</li>
<li><p>电气特性：总线上每一根传输线上信号的<strong>传递方向</strong>和有效的<strong>电平范围</strong>。</p>
<p>规定由CPU发出的信号为输出信号，送入CPU的为输入信号</p>
</li>
<li><p>功能特性：总线中每根传输线的功能</p>
</li>
<li><p>时间特性：总线中的任一根线在什么时间内有效。可用<strong>信号时序图</strong>表示</p>
</li>
</ul>
<h1 id="总线性能指标"><a href="#总线性能指标" class="headerlink" title="总线性能指标"></a>总线性能指标</h1><ul>
<li><p>总线宽度：<strong>数据总线</strong>的根树，用bit(位)表示</p>
</li>
<li><p>总线带宽：总线的数据传输速率，即单位时间内总线上传输数据的位数。单位可以用$MBps$兆字节每秒表示</p>
<p>假设总线工作频率为$f$，总线宽度为$d$，那么总线带宽为$f*d$</p>
</li>
<li><p>时钟同步/异步</p>
<ul>
<li>同步总线：总线上的数据和时钟同步工作</li>
<li>异步总线：总线上的数据和时钟不同步工作</li>
</ul>
</li>
<li><p>总线复用：一条信号线上<strong>分时</strong>传送两种信号。</p>
<p>作用：提高总线的利用率</p>
</li>
<li><p>信号线数：地址总线、数据总线和控制总线的总和</p>
</li>
<li><p>总线控制方式：包括突发工作、自动配置、仲裁方式、逻辑方式、计数方式等</p>
</li>
<li><p>负载能力：即驱动能力，是指当总线接上负载后，总线输入输出的逻辑电平能否保持在正常的额度范围内。</p>
<p>该指标不太严格，通常用可连接扩增电路板数来反映</p>
</li>
<li><p>其他指标：电源电压、总线宽度能否扩展等</p>
</li>
</ul>
<h1 id="总线标准"><a href="#总线标准" class="headerlink" title="总线标准"></a>总线标准</h1><p>总线标准：可视为系统与各模块、模块与模块之间的一个互联的标准界面。</p>
<p>按总线标准设计的接口可视为<strong>通用接口</strong>。</p>
<p>流行的总线标准：</p>
<ul>
<li><p>ISA总线(AT总线)</p>
<p>使用独立于CPU的总线时钟，没有支持总线仲裁的硬件逻辑。</p>
</li>
<li><p>EISA总线</p>
<p>在ISA基础上扩充开放的总线标准。与ISA完全兼容，从CPU中分离了总线控制权，支持多个总线主控器和突发方式的传输。</p>
</li>
<li><p>VESA总线(又称VL-BUS总线)</p>
<p>是<strong>局部总线</strong>标准。</p>
<blockquote>
<p>局部总线：在系统外为两个以上模块提供的高速传输信息通道</p>
</blockquote>
<p>由CPU总线演化而来。</p>
</li>
<li><p>PCI总线</p>
<p>是现代计算机中最常用的总线之一。</p>
<p>主要特点如下：</p>
<ul>
<li><p>高性能：不依附于某个具体处理器的局部总线。</p>
<p>支持突发工作方式</p>
<blockquote>
<p>突发工作方式：若被传送的数据在主存中连续存放，则在访问此组数据时，只需给出第一个数据的地址，占用一个时钟周期，其后每个数据的传送各占一个时钟周期，不必每次给出各个数据的地址，提高效率</p>
</blockquote>
</li>
<li><p>良好的兼容性：PCI总线部件和插件接口相对于处理器是独立的，与ISA、EISA总线均可兼容</p>
</li>
<li><p>支持即插即用</p>
<blockquote>
<p>即插即用：任何拓展卡只要插入系统便可工作</p>
</blockquote>
</li>
<li><p>支持多主设备能力</p>
<blockquote>
<p>主设备：对总线有控制权的设备</p>
<p>从设备：对总线没有控制权的设备</p>
</blockquote>
<p>允许任何主设备和从设备之间实现点到点对等存取</p>
</li>
<li><p>具有与处理器和存储器子系统完全并行操作的能力</p>
</li>
<li><p>提供数据和地址奇偶校验功能</p>
</li>
<li><p>支持两种电压标准</p>
</li>
<li><p>可拓展性好</p>
</li>
<li><p>软件兼容性好</p>
</li>
<li><p>采用多路复用技术，减少了总线引脚个数</p>
</li>
</ul>
</li>
<li><p>AGP总线</p>
<p>显示卡专用的局部总线</p>
<p>基于<strong>PCI2.1版规范</strong>进行扩充修改。</p>
<ul>
<li>采用点对点通道方式，直接与主存联系，以主存作为帧缓冲器，实现了高速存取</li>
<li>定义“双激励“的传输技术，能在一个时钟的上下沿双向传递数据</li>
</ul>
</li>
<li><p>RS-232C总线</p>
<p>串行通信总线标准</p>
<p>应用于串行二进制交换的数据终端设备和数据通信设备之间的标准接口</p>
</li>
<li><p>USB总线</p>
<p>计算机串行接口总线标准</p>
<p>基于<strong>通用连接</strong>技术，实现外设的简单快速连接</p>
<p>主要特点如下：</p>
<ul>
<li>具有真正的即插即用特征。外设装置驱动程序的安装、删除均自动实现</li>
<li>具有很强的连接能力，最多可链式连接127个外设到同一系统</li>
<li>标准统一</li>
<li>连接电缆轻巧，电源体积缩小</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/03%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%88%86%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Leading Werido">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/03%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%88%86%E7%B1%BB/" class="post-title-link" itemprop="url">总线的基本概念及分类</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-19 20:17:00 / 修改时间：20:18:14" itemprop="dateCreated datePublished" datetime="2020-06-19T20:17:00+08:00">2020-06-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/" itemprop="url" rel="index"><span itemprop="name">系统总线</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/06/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/03%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/%E6%80%BB%E7%BA%BF%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%88%86%E7%B1%BB/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/19/计算机组成原理/03系统总线/总线的基本概念及分类/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>985</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <font size=8>总线的基本概念及分类</font>

<blockquote>
<p>my blog:<a href="https://leadingwerido.com" target="_blank" rel="noopener">Something</a></p>
</blockquote>
<h1 id="总线的基本概念"><a href="#总线的基本概念" class="headerlink" title="总线的基本概念"></a>总线的基本概念</h1><p>总线：连接多个部件的信息传输线，是各部件共享的传输介质。</p>
<p>在某一时刻，只允许有<strong>一个部件</strong>向总线发送信息，而<strong>多个部件</strong>可以同时从总线上接受<strong>相同</strong>的信息。</p>
<p>总线是由许多传输线或通路组成，每条线都可以一位一位地传输二进制代码，若干条传输线可以同时传输若干位二进制代码</p>
<p>采用总线连接的计算机结构有下列几种：</p>
<ul>
<li><p>以CPU为中心的双总线结构</p>
<p><img src="https://i.loli.net/2020/06/19/fg9Y6uHWRK2hr3z.jpg" alt="面向CPU的双总线结构框图.jpg"></p>
<ul>
<li>存储总线(M总线)：连接CPU和主存</li>
<li>输入输出总线(I/O总线)：建立CPU和各I/O设备交换信息的通道</li>
</ul>
<p>这种结构在I/O设备与主存交换信息时仍然要占用CPU，影响CPU的工作效率</p>
</li>
<li><p>单总线结构</p>
<p><img src="https://i.loli.net/2020/06/19/zamNAeC6Fb7sOcZ.jpg" alt="单总线结构.jpg"></p>
<p>当I/O设备和主存进行交换信息，不影响CPU工作。</p>
<p>缺点：只有一组总线，要设置总线判优逻辑，让各部件按优先级高低占用总线，避免进行冲突。这也会降低效率</p>
</li>
<li><p>以存储器为中心的双总线结构</p>
<p><img src="https://i.loli.net/2020/06/19/jG5cpwhVgSeqtof.jpg" alt="以存储器为中心的双总线结构.jpg"></p>
<p>在单总线基础上开辟出CPU和主存的存储总线，提高传输效率，减轻系统总线的负担</p>
</li>
</ul>
<h1 id="总线的分类"><a href="#总线的分类" class="headerlink" title="总线的分类"></a>总线的分类</h1><p>以下均按<strong>连接部件</strong>不同，进行分类。</p>
<ul>
<li><p>片内总线：芯片内部的总线</p>
</li>
<li><p>系统总线：CPU、主存、I/O设备各大部件之间的信息传输线，又称<strong>板级总线</strong>或<strong>板间总线</strong></p>
<p>系统总线按照<strong>传输信息不同</strong>，分为三类</p>
<ul>
<li><p>数据总线：传输各功能部件之间的数据信息。是<strong>双向</strong>传输总线，其位数和<strong>机器字长、存储字长</strong>有关。</p>
<p>数据总线宽度：数据总线的位数，是衡量系统性能的重要指标</p>
</li>
<li><p>地址总线：用来指出数据总线上的源数据或目的数据在主存单元的地址或I/O设备的地址</p>
<p>由CPU输出，<strong>单向</strong>传输。</p>
<p>地址总线的位数与存储单元的个数有关</p>
</li>
<li><p>控制总线：用来发出各种控制信号的传输线，使各部件能在<strong>不同时刻</strong>占有总线使用权。</p>
<p>对于任一控制线来说，传输是<strong>单向的</strong>，但是对于控制总线整体，传输是<strong>双向的</strong>。</p>
<p>常见的控制信号：</p>
<ul>
<li>时钟：同步操作</li>
<li>复位：初始化所有部件</li>
<li>总线请求：某部件需获得总线使用权</li>
<li>总线允许：需要获得总线使用权的部件已获得控制权</li>
<li>中断请求：某部件提出中断</li>
<li>中断响应：中断请求被接收</li>
<li>存储器写：将数据总线上的数据写入存储器中</li>
<li>存储器读：</li>
<li>I/O写：</li>
<li>I/O读</li>
<li>传输响应：表示数据已被接受或已被送入数据总线</li>
</ul>
</li>
</ul>
</li>
<li><p>通信总线：用于计算机系统之间或计算机系统与其他系统之间的通信</p>
<p>按传输方式分为两类：</p>
<ul>
<li>串行通信：数据在单条1位宽的传输线上，一位一位地按顺序分时传送</li>
<li>并行通信：数据在多条并行1位宽地传输线上，同时由源传送到目的地</li>
</ul>
<p>并行通信适用于<strong>短距离</strong>数据传输，串行通信适用于<strong>远距离</strong>传送。</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/01%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Leading Werido">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/01%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90/" class="post-title-link" itemprop="url">计算机的基本组成</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-18 11:12:00 / 修改时间：11:29:15" itemprop="dateCreated datePublished" datetime="2020-06-18T11:12:00+08:00">2020-06-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/" itemprop="url" rel="index"><span itemprop="name">计算机系统概论</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/06/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/01%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/18/计算机组成原理/01计算机系统概论/计算机的基本组成/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <font size = 8>计算机的基本组成</font>

<blockquote>
<p>my blog:<a href="https://leadingwerido.com" target="_blank" rel="noopener">Something</a></p>
</blockquote>
<h1 id="冯·诺伊曼计算机"><a href="#冯·诺伊曼计算机" class="headerlink" title="冯·诺伊曼计算机"></a>冯·诺伊曼计算机</h1><p>冯·诺伊曼计算机的特点：</p>
<ul>
<li>由<strong>运算器、存储器、控制器、输入设备、输出设备</strong>五大组件组成</li>
<li>指令和数据以<strong>同等地位</strong>存放于存储器中，并可按地址寻访</li>
<li>指令和数据均用<strong>二进制</strong>表示</li>
<li>指令由<strong>操作码和地址码组成</strong>，操作码表示操作性质，地址码表示操作数在存储器的位置</li>
<li>指令在存储器中按<strong>顺序存放</strong>，但可以改变执行顺序</li>
<li>机器以<strong>运算器</strong>为中心，输入输出设备与存储器间的数据传送通过<strong>运算器</strong>完成(现代计算器中心不是运算器，是<strong>存储器</strong>)</li>
</ul>
<h1 id="硬件框图"><a href="#硬件框图" class="headerlink" title="硬件框图"></a>硬件框图</h1><ul>
<li><p>典型的冯诺依曼计算机：以<strong>运算器</strong>为中心</p>
<p><img src="https://i.loli.net/2020/06/18/nBa6tkNT7Y3CpZS.png" alt="冯·诺伊曼计算机结构.png"></p>
</li>
<li><p>现代的计算机：以<strong>存储器</strong>为中心</p>
<p><img src="https://i.loli.net/2020/06/18/dwFEfVx2UT9n714.png" alt="现代计算机结构框图.png"></p>
<p>各部件的功能：</p>
<ul>
<li>运算器：完成算术运算和逻辑运算，并将运算的中间结果暂存在运算器内</li>
<li>存储器：存放数据和程序</li>
<li>控制器：控制、指挥程序和数据的输入、运行及处理运算结果</li>
<li>输入设备：将人们熟悉的信息形式转换为机器能识别的信息形式</li>
<li>输出设备：将机器运算结果转换为人们熟悉的信息形式</li>
</ul>
<p><strong>中央处理器(CPU)</strong>：运算器和控制器在电路中往往集成在同一芯片</p>
<p><strong>I/O设备(外部设备)</strong>：输入和输出设备</p>
</li>
<li><p>真正的现代计算机结构框图：</p>
<p><img src="https://i.loli.net/2020/06/18/MbGz5HceXA1ORDa.png" alt="真正的现代计算机结构框图.png"></p>
<p>因此简化后，现代计算机由三大部分组成：</p>
<ul>
<li>CPU</li>
<li>I/O设备</li>
<li>主存储器</li>
</ul>
<p><strong>主机</strong>：CPU和主存储器</p>
</li>
</ul>
<p>  存储器子系统分为两类：</p>
<ul>
<li>主存储器：存放程序和数据，直接与CPU交换信息</li>
<li>辅助存储器：简称辅存或外存</li>
</ul>
<p>  CPU的核心部件：</p>
<ul>
<li><p>算数逻辑单元(ALU)：简称算逻部件，完成算数逻辑运算。</p>
</li>
<li><p>控制单元(CU)：解释存储器中的指令，发出操作命令来执行指令，可控制<strong>I/O设备</strong></p>
</li>
</ul>
<h1 id="计算机的工作步骤"><a href="#计算机的工作步骤" class="headerlink" title="计算机的工作步骤"></a>计算机的工作步骤</h1><ol>
<li><p>上机前的准备</p>
<ul>
<li>建立数学模型</li>
<li>确定计算方法</li>
<li>编制解题程序</li>
</ul>
</li>
<li><p>计算机的工作过程</p>
<p>分析计算机各部件功能：</p>
<p><img src="https://i.loli.net/2020/06/18/sBRFygpjiaHMQXe.png" alt="细化的计算机组成框图.png"></p>
<ul>
<li><p>主存储器</p>
<p>包含<strong>存储体M</strong>、各种逻辑部件、控制电路。</p>
<ul>
<li>存储体：由许多<strong>存储单元</strong>组成，每个存储单元包含若干个<strong>存储元件</strong>(又称<strong>存储基元、存储元</strong>)，每个存储元件存储<strong>一位</strong>二进制代码</li>
<li>存储字：一个存储单元存储的二进制代码</li>
<li>存储字长：存储字的位数</li>
<li>存储单元的地址号：赋予每个存储单元的编号</li>
</ul>
<p>主存的工作方式：<strong>按地址存取方式</strong>(即按地址访问存储器(简称访存)，按存储单元的地址号来实现对存储字各位的存、取)</p>
<p>这样的方式让取指令和取数据操作相同，以一套线路进行两种操作。</p>
<p>实现按地址存取，配置两个寄存器$MAR$和$MDR$</p>
<ul>
<li><p>$MAR$：存储器地址寄存器</p>
<p>用来存放欲访问的存储单元的地址，其位数对应存储单元的个数</p>
</li>
<li><p>$MDR$：存储器数据寄存器</p>
<p>用来存放从存储体某单元取出的代码或者准备往某存储单元存入的代码</p>
<p>其位数与存储字长相同</p>
</li>
</ul>
<p>现代计算机MAR和MDR一般集成在CPU中</p>
</li>
<li><p>运算器</p>
<p>运算器最少包括3个寄存器和一个算数逻辑单元(ALU)</p>
<p>$ACC$：累加器</p>
<p>$MQ$：乘商寄存器</p>
<p>$X$：操作数寄存器</p>
<p><img src="https://i.loli.net/2020/06/18/kcTlqx74EHtsgfi.png" alt="各寄存器所存放的各类操作数.jpg"></p>
</li>
<li><p>控制器</p>
<p>完成一条指令的三个步骤：</p>
<ul>
<li>取指过程：命令存储器读取一条指令</li>
<li>分析过程：对指令进行分析，指出要完成的操作</li>
<li>执行过程：根据操作数所在地址和指令的操作码完成操作</li>
</ul>
<p>控制器的组成：</p>
<ul>
<li>程序计数器(PC)：存放当前欲执行指令的地址，和主存的$MAR$直接相连，可自动形成下一条指令的地址，也即加一</li>
<li>指令寄存器(IR)：存放当前指令，内容来自主存的$MDR$，IR中的操作码送至CU，分析指令；地址码作为操作数的地址送至$MAR$</li>
<li>控制单元(CU)：分析当前指令需完成的操作，发出各种<strong>微操作命令序列</strong></li>
</ul>
</li>
<li><p>I/O子系统</p>
<p>包括I/O设备和相应的接口。</p>
<p>接受CU发出的各种控制命令。</p>
</li>
</ul>
</li>
</ol>
<h1 id="计算机硬件的主要技术指标"><a href="#计算机硬件的主要技术指标" class="headerlink" title="计算机硬件的主要技术指标"></a>计算机硬件的主要技术指标</h1><p>主要包括硬件的性能指标和软件的功能。</p>
<ul>
<li><p>机器字长</p>
<p><strong>机器字长</strong>：CPU一次能处理数据的位数，与CPU的寄存器位数有关。</p>
<p>字长影响数的表示范围和精度；也会影响机器的运算速度。</p>
</li>
<li><p>存储容量</p>
<p>包括主存容量和辅存容量</p>
<ul>
<li><p>主存容量</p>
<p>存储单元个数 $\times$存储字长，也即$MAR\times MDR$</p>
</li>
<li><p>辅存容量</p>
</li>
</ul>
</li>
<li><p>运算速度</p>
<ul>
<li><p>影响运算速度的因数：机器的主频、执行什么样的操作、主存本身的速度</p>
</li>
<li><p>衡量运算速度的方法：吉普森法，综合考虑每条指令的执行时间以及它们在全部操作中所占的百分比</p>
<script type="math/tex; mode=display">
T_M=\sum\limits_{i=1}^{n}f_it_i</script></li>
<li><p>表示运算速度的单位：</p>
<ul>
<li>MIPS(百万条指令每秒)</li>
<li>CPI：执行一条指令所需的时钟机器数(机器主频的倒数)</li>
<li>FLOPS(浮点运算次数每秒)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>:smile:</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/01%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Leading Werido">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/01%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">计算机系统简介</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-18 00:48:00 / 修改时间：00:48:23" itemprop="dateCreated datePublished" datetime="2020-06-18T00:48:00+08:00">2020-06-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">计算机组成原理</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/" itemprop="url" rel="index"><span itemprop="name">计算机系统概论</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/06/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/01%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%AE%80%E4%BB%8B/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/18/计算机组成原理/01计算机系统概论/计算机系统简介/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <font size = 8>计算机系统简介</font>

<blockquote>
<p>my blog：<a href="https://leadingwerido.com" target="_blank" rel="noopener">Something</a></p>
</blockquote>
<h1 id="软硬件概念"><a href="#软硬件概念" class="headerlink" title="软硬件概念"></a>软硬件概念</h1><ul>
<li><strong>硬件</strong>：计算机的实体部分。如各类光、电、机设备的实物组成</li>
<li><strong>软件</strong>：具有各类特殊功能的程序。通常存放在计算机的<em>主存或辅存</em>中。软件已经成为评价<strong>计算机系统性能好坏的重要标志</strong>。<ul>
<li>系统软件：管理整个计算机系统，监视服务，<em>使系统资源得到合理调度，高效运行</em>。<ul>
<li>标准程序库</li>
<li>语言处理程序</li>
<li>操作系统</li>
<li>服务程序</li>
<li>数据库管理系统</li>
<li>网络软件</li>
</ul>
</li>
<li>应用软件：用户根据任务需要所编制的各种程序</li>
</ul>
</li>
</ul>
<p>计算机性能的好坏取决于软、硬件功能的总和。</p>
<h1 id="计算机系统的层次结构"><a href="#计算机系统的层次结构" class="headerlink" title="计算机系统的层次结构"></a>计算机系统的层次结构</h1><p>一般认为计算机系统具有<strong>四级层次结构</strong>。</p>
<ul>
<li><p>第零级：<strong>微程序机器</strong>$M_0$(微指令系统)</p>
<p>将机器$M_1$中的<strong>每一条</strong>机器指令，翻译成<strong>一组</strong>微指令，构成<strong>一个</strong>微程序。</p>
<p>微程序$M_0$可看作对实际机器$M_1$的分解，用微程序解释用执行$M_1$的每一条机器指令。</p>
</li>
<li><p>第一级：<strong>实际机器</strong>$M_1$(又称<strong>传统机器</strong>)</p>
<p>直接执行<em>机器语言程序</em>(用0、1代码表示的语言)</p>
</li>
<li><p>第二级：<strong>虚拟机器</strong>$M_3$(汇编语言机器)</p>
<ul>
<li>汇编语言是<strong>符号化的</strong>程序设计语言。汇编语言仍是<strong>面向实际机器的语言</strong>，因此汇编语言没有通用性，受到实际机器指令系统的制约。</li>
</ul>
<p>由汇编语言程序翻译成机器语言程序，才能被机器接受并运行。</p>
<p>$M_2$是人们感受到的存在的一台具有翻译功能的机器，称为<strong>虚拟机</strong></p>
</li>
<li><p>第四级：虚拟机器$M_2$(操作系统机器)</p>
<p>用机器语言解释操作系统。</p>
<p>在实际机器$M_1$和虚拟机器$M_2$中，存在虚拟机器，由<strong>操作系统</strong>构成。</p>
<p>操作系统提供了在汇编语言和高级语言的使用和实现过程中所需的基本操作，还起到控制并管理计算机系统全部硬件和软件资源的作用。</p>
</li>
<li><p>第三级：<strong>虚拟机器</strong>$M_4$(高级语言机器)</p>
<p>高级语言：具有较强的通用性</p>
<p>两种运行方法：</p>
<ul>
<li><p>先将<strong>高级语言程序</strong>翻译成<strong>汇编语言程序</strong>(或其他中间语言程序)，然后再翻译成<strong>机器语言程序</strong></p>
</li>
<li><p>直接将<strong>高级语言程序</strong>翻译成<strong>机器语言程序</strong></p>
<p>直接翻译的软件称为<strong>翻译程序</strong>。分为两类：</p>
<ul>
<li><p>编译程序：将用户编写的高级语言程序的<strong>全部语句一次全部</strong>翻译成机器语言程序，再执行。</p>
</li>
<li><p>解释程序：将源程序的<strong>一条语言</strong>翻译成对应于机器语言的一条语句，并且立即执行这条语句。</p>
<p>特点：翻译一次执行一次，<strong>即使下一次重复执行该语句，也必须重新翻译</strong>。</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>虚拟机器$M_4$还可向上延伸，够成<strong>语言虚拟机</strong>。所用语言为面向各种问题的应用语言。</p>
</li>
</ul>
<p>一般来说</p>
<ul>
<li>硬件主要研究传统机器$M_1$和微程序机器$M_0$。但是随着<strong>超大规模集成电路</strong>技术的不断发展，一部分软件功能将由硬件来实现。</li>
<li>软件的研究对象主要是操作系统级以上的各级虚拟机。</li>
</ul>
<h1 id="计算机体系结构"><a href="#计算机体系结构" class="headerlink" title="计算机体系结构"></a>计算机体系结构</h1><p>计算机体系结构：能够被程序员看到的<strong>计算机系统的属性</strong>，即概念性的结构与功能特性。</p>
<p><strong>计算机系统的属性</strong>：用机器语言编程的程序员所看到的传统机器的属性，包括如下：</p>
<ul>
<li>指令集</li>
<li>数据类型</li>
<li>存储器寻址技术</li>
<li>I/O机理</li>
</ul>
<p>不同层次上编程的程序员看到的计算机属性也是不同的。</p>
<h1 id="计算机组成"><a href="#计算机组成" class="headerlink" title="计算机组成"></a>计算机组成</h1><p>计算机组成：<strong>如何实现</strong>计算机体系结构所体现的属性，包含了许多对于程序员是<strong>透明的</strong>硬件细节。</p>
<p>当具有相同的机器指令系统，认为具有相同的<strong>体系结构</strong>，但是因为实现功能的方法不同，<strong>组成</strong>可以是不同的。</p>
<p>[<a href="https://leadingwerido.com" target="_blank" rel="noopener">https://leadingwerido.com</a>]:</p>
<p>[<a href="https://leadingwerido.com" target="_blank" rel="noopener">https://leadingwerido.com</a>]:</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/16/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%86%E6%9E%90/%E4%B8%96%E7%95%8C%E5%90%8D%E7%94%BB%E9%99%88%E5%88%97%E9%A6%86%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Leading Werido">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/16/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%86%E6%9E%90/%E4%B8%96%E7%95%8C%E5%90%8D%E7%94%BB%E9%99%88%E5%88%97%E9%A6%86%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">世界陈列馆问题(分支限界法)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-16 23:34:00 / 修改时间：23:34:21" itemprop="dateCreated datePublished" datetime="2020-06-16T23:34:00+08:00">2020-06-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%86%E6%9E%90/" itemprop="url" rel="index"><span itemprop="name">算法设计与分析</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/06/16/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%86%E6%9E%90/%E4%B8%96%E7%95%8C%E5%90%8D%E7%94%BB%E9%99%88%E5%88%97%E9%A6%86%E9%97%AE%E9%A2%98/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/16/算法设计与分析/世界名画陈列馆问题/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <font size=8>世界名画陈列馆问题</font>

<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>世界名画陈列馆由$m\times n$个排列成矩形阵列的陈列室组成。为了防止名画被盗，需要在陈列室中设置机器人哨位。每个警卫机器人除了监视它所在的陈列室外，还可以监视与它所在的陈列室相邻的上下左右四个陈列室。试设计一个安排警卫机器人哨位的算法，使名画陈列馆中每一个陈列室都在警卫机器人的监视之下，且所用的警卫机器人人数最少。</p>
<blockquote>
<p>数据范围：</p>
<p>$1\leq m,n\leq 20$</p>
</blockquote>
<h1 id="解答算法"><a href="#解答算法" class="headerlink" title="解答算法"></a>解答算法</h1><p>题目要求使用<strong>优先队列式分支限界法</strong></p>
<p>首先设定一个类<code>Node</code>，用来存储该问题所进行搜索的树的节点。该问题中用来评估的标准应当是当前已经安排的警卫机器人数目，用来进行优先队列排序的时候，也应当用该标准进行排序。因此重载<code>Node</code>中的<code>&lt;</code>运算符如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Node&amp; a, <span class="keyword">const</span> Node&amp; b)   <span class="comment">//重载小于符号，用来进行优先队列的排序，确保永远是使用机器人最少的节点靠前</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a.robotNums &gt; b.robotNums;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后初始化一个节点<code>tmp</code>，然后将其压入优先队列<code>heap</code>中，一次性生成其所有的子节点，将其进行压入<code>heap</code>中，然后把原来的节点<code>tmp</code>弹出<code>heap</code>中，每一次都选取优先队列的<code>top</code>元素。一直这样循环操作，一直到<code>heap</code>为空，或者是当前找到的节点已经观察了陈列室中的所有位置。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (!heap.empty())   <span class="comment">//只要heap不为空，一直进行下去</span></span><br><span class="line">    &#123;</span><br><span class="line">        tmp = heap.top();    <span class="comment">//每次取heap的堆顶元素</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (beenMonitored == m * n)</span><br><span class="line">        &#123;</span><br><span class="line">			<span class="comment">//如果当前已经监视了所有的房间，那么操作结束</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//生成当前节点tmp的所有可能的子节点，将其加入heap中</span></span><br><span class="line">        &#125;</span><br><span class="line">        heap.pop();     <span class="comment">//弹出堆顶元素</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>至于生成子节点的算法，主要依据的是当前待放置的位置<code>i,j</code>而定的。永远<code>map[i][j +1]</code>都是一个好的选择，如果<code>map[i + 1][j]</code>没有监视，或者<code>map[i + 2][j]</code>没有监视，那么<code>map[i + 1][j]</code>放置是个很好的选择。如果<code>map[i + 1][j]</code>和<code>map[i][j+1]</code>都没有被监视，<code>map[i][j]</code>也是个很好的选择。</p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solve</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>   //<span class="title">Node</span>节点，用来存放搜索树的节点</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">Solve</span>;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> i;    <span class="comment">//当前要放置的新位置 横坐标：i 纵坐标：j</span></span><br><span class="line">    <span class="keyword">int</span> j;</span><br><span class="line">    <span class="keyword">int</span> robotNums;    <span class="comment">//当前节点已经放置的警卫机器人数目</span></span><br><span class="line">    <span class="keyword">int</span> beenMonitored;   <span class="comment">//当前已经被监视的房间数</span></span><br><span class="line">    <span class="keyword">int</span>** x;    <span class="comment">//当前放置警卫的地方   0表示没有，1表示放置了</span></span><br><span class="line">    <span class="keyword">int</span>** y;    <span class="comment">//当前已经被监视的地方   0表示没有，1表示已经监视了</span></span><br><span class="line">    <span class="keyword">int</span> m;      <span class="comment">//行</span></span><br><span class="line">    <span class="keyword">int</span> n;      <span class="comment">//列</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Node();   <span class="comment">//构造函数</span></span><br><span class="line">    Node(<span class="keyword">int</span> m, <span class="keyword">int</span> n);   <span class="comment">//构造函数,m、n是行列数</span></span><br><span class="line">    Node(<span class="keyword">const</span> Node&amp; a);  <span class="comment">//这个函数是用于heap的push，push会调用复制构造函数，因此必须自定义一个</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Node&amp; a, <span class="keyword">const</span> Node&amp; b);   <span class="comment">//重载&lt;，用于优先队列的使用</span></span><br><span class="line">    Node&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Node&amp; a)   <span class="comment">//赋值运算符，懒得换位置了</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (x || y)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m + <span class="number">2</span>; ++i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (x)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">delete</span>[] x[i];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (y)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">delete</span>[] y[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">delete</span>[] x;</span><br><span class="line">            <span class="keyword">delete</span>[] y;</span><br><span class="line">            x = <span class="literal">NULL</span>;</span><br><span class="line">            y = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        i = a.i;</span><br><span class="line">        j = a.j;</span><br><span class="line">        robotNums = a.robotNums;</span><br><span class="line">        beenMonitored = a.beenMonitored;</span><br><span class="line">        m = a.m;</span><br><span class="line">        n = a.n;</span><br><span class="line">        x = <span class="keyword">new</span> <span class="keyword">int</span>* [m + <span class="number">2</span>];</span><br><span class="line">        y = <span class="keyword">new</span> <span class="keyword">int</span>* [m + <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m + <span class="number">2</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            x[i] = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">2</span>];</span><br><span class="line">            y[i] = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">2</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n + <span class="number">2</span>; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                x[i][j] = a.x[i][j];</span><br><span class="line">                y[i][j] = a.y[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~Node();   <span class="comment">//用到了new，因此析构函数要重载，避免内存泄露</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solve</span>     //解决问题的类</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    priority_queue&lt;Node&gt; heap;    <span class="comment">//优先队列heap</span></span><br><span class="line">    <span class="keyword">int</span> ans;     <span class="comment">//答案所需要的警卫数目</span></span><br><span class="line">    <span class="keyword">int</span> m;       <span class="comment">//行列数</span></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">int</span>** result;  <span class="comment">//答案警卫的排列顺序</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Solve();</span><br><span class="line">    Solve(<span class="keyword">int</span> m, <span class="keyword">int</span> n);</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">(ofstream&amp; fcout)</span></span>;    <span class="comment">//进行整个计算+输出</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">get_min</span><span class="params">()</span></span>;               <span class="comment">//运用分支限界法，寻找最小值</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(ofstream&amp; fcout)</span></span>;  <span class="comment">//打印警卫位置和数目</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">copy</span><span class="params">(<span class="keyword">int</span>** x, <span class="keyword">int</span>** y)</span></span>;  <span class="comment">//将一个二维数组赋值给另一个</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">(Node&amp; tmp, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>;   <span class="comment">//生成子节点，同时将其添加到heap中</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ifstream fcin;</span><br><span class="line">    fcin.open(<span class="string">"input.txt"</span>);</span><br><span class="line">    <span class="keyword">if</span> (!fcin.is_open())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"文件 input.txt 未能打开"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> m, n;</span><br><span class="line">    fcin &gt;&gt; m &gt;&gt; n;</span><br><span class="line">    fcin.close();</span><br><span class="line">    <span class="function">Solve <span class="title">solve</span><span class="params">(m, n)</span></span>;</span><br><span class="line"></span><br><span class="line">    ofstream fcout;</span><br><span class="line">    fcout.open(<span class="string">"output.txt"</span>);</span><br><span class="line">    <span class="keyword">if</span> (!fcout.is_open())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"文件 output.txt 未能打开"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    solve.run(fcout);</span><br><span class="line">    fcout.close();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h2><blockquote>
<ul>
<li>时间复杂度为：和行列数有关系，为$O(m*n)$</li>
<li>空间复杂度为：利用到了二维数组来存放状态，假设可能的节点数为K，复杂度为$O(m<em>n</em>K)$</li>
</ul>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/15/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0030%E5%88%B6%E4%BD%9Cm%E6%9D%9F%E8%8A%B1%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E6%9C%80%E5%B0%91%E5%A4%A9%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Leading Werido">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/15/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0030%E5%88%B6%E4%BD%9Cm%E6%9D%9F%E8%8A%B1%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E6%9C%80%E5%B0%91%E5%A4%A9%E6%95%B0/" class="post-title-link" itemprop="url">0030 制作m束花所需要的最少天数</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-15 01:00:00" itemprop="dateCreated datePublished" datetime="2020-06-15T01:00:00+08:00">2020-06-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-16 12:35:34" itemprop="dateModified" datetime="2020-06-16T12:35:34+08:00">2020-06-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/" itemprop="url" rel="index"><span itemprop="name">每天一道算法题</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/06/15/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0030%E5%88%B6%E4%BD%9Cm%E6%9D%9F%E8%8A%B1%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E6%9C%80%E5%B0%91%E5%A4%A9%E6%95%B0/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/15/每天一道算法题/0030制作m束花所需要的最少天数/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <font size=8>制作m束花所需要的最少天数</font>

<blockquote>
<p>编号：0030</p>
<p>试题来源：<a href="https://leetcode-cn.com/problems/minimum-number-of-days-to-make-m-bouquets/" target="_blank" rel="noopener">leetcode</a></p>
<p>my blog:<a href="https://leadingwerido.com" target="_blank" rel="noopener">Something</a></p>
</blockquote>
<h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>给定一个整数数组<code>bloomDay</code>，以及两个整数<code>m</code>和<code>k</code>。</p>
<p>现需要制作<code>m</code>束花。制作花束的时候，需要使用花园中<strong>相邻</strong>的<code>k</code>朵花。</p>
<p>花园中有<code>n</code>朵花，第<code>i</code>朵花会在<code>bloomDay[i]</code>时盛开，恰好可以用于一束花中。</p>
<p>请返回从花园中摘<code>m</code>束花需要等待的最少的天数。如果不能摘到<code>m</code>束花，则返回-1。</p>
<h1 id="解答算法"><a href="#解答算法" class="headerlink" title="解答算法"></a>解答算法</h1><h2 id="算法思路"><a href="#算法思路" class="headerlink" title="算法思路"></a>算法思路</h2><p>此题目用到的方法是<strong>二分法</strong>。好像只要答案符合单调的性质，都可以使用二分法进行解答。</p>
<p>这里面返回的天数<code>result</code>显然符合单调性，如果<code>result</code>满足条件，那么<code>result+1</code>显然，也会满足条件，因此适用于二分法。</p>
<p>那么假定我们以<code>bloomDay</code>中最小的数作为<code>l</code>，最大的数作为<code>r</code>，那么利用正常的二分法的思路就可以，判断<code>mid</code>是否满足条件，如果满足，更新<code>r</code>，否则，更新<code>l</code>。唯一区别的地方在于，如果满足条件，同时更新<code>result = mid</code>。</p>
<p>这里需要定义一个<code>check</code>函数，来判断是否满足条件。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; bloomDay, <span class="keyword">int</span> m, <span class="keyword">int</span> k, <span class="keyword">int</span> mid)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> times = <span class="number">0</span>, size = bloomDay.size(), tmpLen = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(bloomDay[i] &lt;= mid)</span><br><span class="line">			&#123;</span><br><span class="line">				++tmpLen;</span><br><span class="line">				<span class="keyword">if</span>(tmpLen &gt;= k)</span><br><span class="line">				&#123;</span><br><span class="line">					++times;</span><br><span class="line">					tmpLen = <span class="number">0</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				tmpLen = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> (times &gt;= m);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; bloomDay, <span class="keyword">int</span> m, <span class="keyword">int</span> k, <span class="keyword">int</span> mid)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> times = <span class="number">0</span>, size = bloomDay.size(), tmpLen = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(bloomDay[i] &lt;= mid)</span><br><span class="line">			&#123;</span><br><span class="line">				++tmpLen;</span><br><span class="line">				<span class="keyword">if</span>(tmpLen &gt;= k)</span><br><span class="line">				&#123;</span><br><span class="line">					++times;</span><br><span class="line">					tmpLen = <span class="number">0</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				tmpLen = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> (times &gt;= m);</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minDays</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; bloomDay, <span class="keyword">int</span> m, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> l = *min_element(bloomDay.begin(), bloomDay.end()), r = *max_element(bloomDay.begin(), bloomDay.end()), result = <span class="number">-1</span>;</span><br><span class="line">    	<span class="keyword">if</span>(bloomDay.size() &lt; m*k)</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">while</span>(l &lt;= r)</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">    		<span class="keyword">if</span>(check(bloomDay, m, k, mid))</span><br><span class="line">    		&#123;</span><br><span class="line">    			result = mid;</span><br><span class="line">    			r = mid - <span class="number">1</span>;</span><br><span class="line">    		&#125;</span><br><span class="line">    		<span class="keyword">else</span></span><br><span class="line">    		&#123;</span><br><span class="line">    			l = mid + <span class="number">1</span>;</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h2><blockquote>
<ul>
<li>时间复杂度：$O(nlogm)$，因为每次check的时候，都要判断条件，对数组进行遍历。另外，二分法遍历的时间复杂度为$O(logm)$</li>
<li>空间复杂度：$O(1)$</li>
</ul>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/14/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0029%E8%BD%AC%E5%8F%98%E6%95%B0%E7%BB%84%E5%90%8E%E6%9C%80%E6%8E%A5%E8%BF%91%E7%9B%AE%E6%A0%87%E5%80%BC%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Leading Werido">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/14/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0029%E8%BD%AC%E5%8F%98%E6%95%B0%E7%BB%84%E5%90%8E%E6%9C%80%E6%8E%A5%E8%BF%91%E7%9B%AE%E6%A0%87%E5%80%BC%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C/" class="post-title-link" itemprop="url">0029 转变数组后最接近目标值的数组和</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-14 23:41:00 / 修改时间：23:41:50" itemprop="dateCreated datePublished" datetime="2020-06-14T23:41:00+08:00">2020-06-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/" itemprop="url" rel="index"><span itemprop="name">每天一道算法题</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/06/14/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0029%E8%BD%AC%E5%8F%98%E6%95%B0%E7%BB%84%E5%90%8E%E6%9C%80%E6%8E%A5%E8%BF%91%E7%9B%AE%E6%A0%87%E5%80%BC%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/14/每天一道算法题/0029转变数组后最接近目标值的数组和/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <font size = 8>转变数组后最接近目标值的数组和</font>

<blockquote>
<p>编号：0029</p>
<p>试题来源：<a href="https://leetcode-cn.com/problems/sum-of-mutated-array-closest-to-target/" target="_blank" rel="noopener">leetcode</a></p>
<p>我的博客：<a href="https://leadingwerido.com" target="_blank" rel="noopener">Something</a></p>
</blockquote>
<h1 id="试题描述"><a href="#试题描述" class="headerlink" title="试题描述"></a>试题描述</h1><p>给定一个数组<code>arr</code>和一个目标值<code>target</code>，请返回一个整数<code>value</code>，使得将数组中所有大于<code>value</code>的值变成<code>value</code>后，数组的和最接近<code>target</code>(最接近表示两者之差的绝对值最小)</p>
<p>如果有多种使得和最接近<code>target</code>的方案，请返回这些整数中最小的值。</p>
<p>请注意，<code>value</code>不一定是<code>arr</code>中的数字</p>
<blockquote>
<ul>
<li>$1\leq arr.length\leq 10^4$</li>
<li>$1\leq arr[i],\quad target\leq10^5$</li>
</ul>
</blockquote>
<h1 id="解答算法"><a href="#解答算法" class="headerlink" title="解答算法"></a>解答算法</h1><h2 id="暴力法"><a href="#暴力法" class="headerlink" title="暴力法"></a>暴力法</h2><h3 id="解答思路"><a href="#解答思路" class="headerlink" title="解答思路"></a>解答思路</h3><p>首先要思考的是可能取值<code>value</code>的上下界，显然，当<code>value</code>大于<code>arr</code>中的最大值，那么继续增大，也不会影响数组的取值，因此<code>value</code>的上界应当是<code>arr</code>中的最大值。下界很容易想到应当是从1开始，因为<code>arr[i]&gt;=1</code>。</p>
<p>对于下界，可以做一些常数的优化，显然，假设我们有<code>arr</code>的大小，记为<code>arrSize</code>，那么显然如果会有平均数<code>target/arrSize</code>，那么如果<code>arr</code>中的最小值小于该平均数，那么当<code>value</code>取<code>target/arrSize</code>，整个数组的和仍然会小于<code>target</code>，然后我们就可以据此作为<code>value</code>的下界；如果整个数组中最小值都大于该平均数，那么显然，最终取值就应当是<code>target/arrSize</code>或者是<code>target/arrSize + 1</code>。</p>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><p>原版代码，经过了简单的优化</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findBestValue</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    	<span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; myMap;   <span class="comment">//定义了一个map存放arr中的值和其出现的次数</span></span><br><span class="line">    	<span class="keyword">int</span> arrSize = arr.size();   </span><br><span class="line">    	<span class="keyword">int</span> result, tmpSum = <span class="number">0</span>, tmpSize = <span class="number">0</span>, myMin = INT_MAX;</span><br><span class="line">    	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arrSize; ++i)   <span class="comment">//初始化myMap</span></span><br><span class="line">    	&#123;</span><br><span class="line">    		++myMap[arr[i]];</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">auto</span> lastIt = myMap.begin();</span><br><span class="line">    	<span class="keyword">for</span>(<span class="keyword">auto</span> it = myMap.begin(); it != myMap.end(); ++it)   <span class="comment">//对myMap中的每个值进行遍历</span></span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="keyword">int</span> j = (it != myMap.begin() ? lastIt-&gt;first + <span class="number">1</span> : min(target / arrSize, it-&gt;first));  <span class="comment">//如果不是myMap中的第一个数，那么内部的遍历应当是从last到now；如果是，那么要确定起始值</span></span><br><span class="line">    		<span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">    		<span class="keyword">for</span>(; j &lt;= it-&gt;first; ++j)   <span class="comment">//进行遍历</span></span><br><span class="line">    		&#123;</span><br><span class="line">    			tmp = tmpSum + (arrSize - tmpSize) * j;   <span class="comment">//如果当前取值更优，更新myMin和result，也即value</span></span><br><span class="line">    			<span class="keyword">if</span>(myMin &gt; <span class="built_in">abs</span>(target - tmp))</span><br><span class="line">    			&#123;</span><br><span class="line">    				result = j;</span><br><span class="line">    				myMin = <span class="built_in">abs</span>(target - tmp);</span><br><span class="line">    			&#125;</span><br><span class="line">    		&#125;</span><br><span class="line">    		tmpSum += it-&gt;first * it-&gt;second;      <span class="comment">//每一次从新更新前缀和</span></span><br><span class="line">    		tmpSize += it-&gt;second;                 <span class="comment">//更新前缀的数字个数</span></span><br><span class="line">    		lastIt = it;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>经过完全的优化</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findBestValue</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> arrSize = arr.size();   </span><br><span class="line">    	<span class="keyword">int</span> result, diff = INT_MAX, cur = <span class="number">0</span>;</span><br><span class="line">    	sort(arr.begin(), arr.end());   <span class="comment">//对数组进行排序</span></span><br><span class="line">    	<span class="keyword">int</span> average = target / arrSize;</span><br><span class="line">    	<span class="keyword">if</span>(arr[<span class="number">0</span>] &gt; average)</span><br><span class="line">    	&#123;</span><br><span class="line">    		result = <span class="built_in">abs</span>(target - average * arrSize) &gt; <span class="built_in">abs</span>(target - (average + <span class="number">1</span>) * arrSize) ? (average + <span class="number">1</span>) : average;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">else</span> <span class="keyword">if</span>(arr[arrSize - <span class="number">1</span>] &lt;= average)</span><br><span class="line">    	&#123;</span><br><span class="line">    		result = arr[arrSize - <span class="number">1</span>];</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">else</span></span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; prefix(arrSize + <span class="number">1</span>);</span><br><span class="line">	        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= arrSize; ++i)</span><br><span class="line">	        &#123;</span><br><span class="line">	            prefix[i] = prefix[i - <span class="number">1</span>] + arr[i - <span class="number">1</span>];</span><br><span class="line">	        &#125;</span><br><span class="line"></span><br><span class="line">	        <span class="keyword">for</span> (<span class="keyword">int</span> i = average; i &lt;= arr[arrSize - <span class="number">1</span>] &amp;&amp; cur &lt; target; ++i)</span><br><span class="line">	        &#123;</span><br><span class="line">	            <span class="keyword">auto</span> iter = lower_bound(arr.begin(), arr.end(), i);</span><br><span class="line">	            cur = prefix[iter - arr.begin()] + (arr.end() - iter) * i;</span><br><span class="line">	            <span class="keyword">if</span> (<span class="built_in">abs</span>(cur - target) &lt; diff)</span><br><span class="line">	            &#123;</span><br><span class="line">	                result = i;</span><br><span class="line">	                diff = <span class="built_in">abs</span>(cur - target);</span><br><span class="line">	            &#125;</span><br><span class="line">        	&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>优化完上下界，表现依然不是很好</p>
<h2 id="双重二分查找"><a href="#双重二分查找" class="headerlink" title="双重二分查找"></a>双重二分查找</h2><h3 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr, <span class="keyword">int</span> x)</span> </span>&#123;   <span class="comment">//找到数组和</span></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">int</span>&amp; num: arr) &#123;</span><br><span class="line">            ret += (num &gt;= x ? x : num);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findBestValue</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        sort(arr.begin(), arr.end());   <span class="comment">//排序</span></span><br><span class="line">        <span class="keyword">int</span> n = arr.size();   <span class="comment">//得到size</span></span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">prefix</span><span class="params">(n + <span class="number">1</span>)</span></span>;   <span class="comment">//前缀和数组</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            prefix[i] = prefix[i - <span class="number">1</span>] + arr[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = *max_element(arr.begin(), arr.end()), ans = <span class="number">-1</span>;  </span><br><span class="line">        <span class="keyword">while</span> (l &lt;= r) &#123;   <span class="comment">//二分法查找</span></span><br><span class="line">            <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">auto</span> iter = lower_bound(arr.begin(), arr.end(), mid);</span><br><span class="line">            <span class="keyword">int</span> cur = prefix[iter - arr.begin()] + (arr.end() - iter) * mid;</span><br><span class="line">            <span class="keyword">if</span> (cur &lt;= target) &#123;   <span class="comment">//找到小于等于target的最大值</span></span><br><span class="line">                ans = mid;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                r = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> choose_small = check(arr, ans);</span><br><span class="line">        <span class="keyword">int</span> choose_big = check(arr, ans + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">abs</span>(choose_small - target) &lt;= <span class="built_in">abs</span>(choose_big - target) ? ans : ans + <span class="number">1</span>;<span class="comment">//进行判断</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在时间上优化了更多，因为二分查找带来的优点</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0028%E5%9C%A8%E5%9C%86%E5%86%85%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%E7%82%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Leading Werido">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Something">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0028%E5%9C%A8%E5%9C%86%E5%86%85%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%E7%82%B9/" class="post-title-link" itemprop="url">0028 在圆内随机生成点</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-11 00:17:00 / 修改时间：00:17:33" itemprop="dateCreated datePublished" datetime="2020-06-11T00:17:00+08:00">2020-06-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/" itemprop="url" rel="index"><span itemprop="name">每天一道算法题</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/06/11/%E6%AF%8F%E5%A4%A9%E4%B8%80%E9%81%93%E7%AE%97%E6%B3%95%E9%A2%98/0028%E5%9C%A8%E5%9C%86%E5%86%85%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%E7%82%B9/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/11/每天一道算法题/0028在圆内随机生成点/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <font size=8>在圆内随机生成点</font>

<blockquote>
<p>编号：0028</p>
<p>试题来源：<a href="https://leetcode-cn.com/problems/generate-random-point-in-a-circle/" target="_blank" rel="noopener">leetcode</a></p>
</blockquote>
<h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>给定圆的半径和圆心的<code>x</code>和<code>y</code>坐标，写一个在圆中产生均匀随机点的函数<code>randPoint</code></p>
<blockquote>
<p>说明：</p>
<ul>
<li>输入值和输出值都将是浮点数</li>
<li>圆的半径和圆心的x、y坐标将作为参数传递给类的构造函数</li>
<li>圆周上的点也认为在圆中</li>
<li><code>randPoint</code>返回一个包含随机点的<code>x</code>坐标和<code>y</code>坐标的大小为2的数组</li>
</ul>
</blockquote>
<h1 id="解答算法"><a href="#解答算法" class="headerlink" title="解答算法"></a>解答算法</h1><h2 id="解答思路"><a href="#解答思路" class="headerlink" title="解答思路"></a>解答思路</h2><p>这道题大概有两种解答思路，第一种是<strong>拒绝采样</strong>，就是选取一个更容易随机生成的图形，例如一个正方形，让其边长为半径，那么显然很容易做到在正方形中随机产生一个点，然后只要判断该点是否在圆内即可。</p>
<p>正方形中随机生成点</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> x = r * (<span class="keyword">double</span>)rand() / RAND_MAX;  <span class="comment">//这里rand()产生的数一定小于RAND_MAX，因此后面产生了一个0~1之间的随机数</span></span><br><span class="line"><span class="keyword">double</span> y = r * (<span class="keyword">double</span>)rand() / RNAD_MAX;</span><br></pre></td></tr></table></figure>
<p>判断该点是否在圆内</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(x * x + y * y &gt; r * r)<span class="comment">//判断点是否在圆内</span></span><br></pre></td></tr></table></figure>
<p>另一种方法就是用极坐标的思路，在圆内随机进行取点。</p>
<p>这里我们选用先取角度<code>theta</code>，再取半径<code>tmpR</code>的方法。</p>
<p>首先先取角度<code>theta</code>，角度360，被选中的等可能的，因此简单的取随机数就可以了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> theta = <span class="number">360</span> * (<span class="keyword">double</span>)rand() /　RAND_MAX;</span><br></pre></td></tr></table></figure>
<p>然后选取半径<code>tmpR</code>，这里有一个坑。我最开始认为所有的半径也是等可能的，但是实际上显然并不是。用数学的公式可知面积应该为$\int 2<em>pi</em>x$，可以求出概率密度公式就为$f(x) = 2*x$，这里忽略了$\pi$，因为没啥影响。</p>
<p>然后可以发现，对于任意的一个边长，点落在以该边长为半径的圆内的概率为$F(x)=x^2$，而显然这样的概率应当是均匀分布的，因此每一个概率都可以对应一个半径，因此我们有</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> tmpR = r * <span class="built_in">sqrt</span>((<span class="keyword">double</span>)rand() / RAND_MAX); <span class="comment">//这里用到sqrt是为了根据概率x2反推半径</span></span><br></pre></td></tr></table></figure>
<p>然后这两个量就可以求出正确的结果</p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">double</span> r;</span><br><span class="line">	<span class="keyword">double</span> x;</span><br><span class="line">	<span class="keyword">double</span> y;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Solution(<span class="keyword">double</span> radius, <span class="keyword">double</span> x_center, <span class="keyword">double</span> y_center) &#123;</span><br><span class="line">    	srand((<span class="keyword">unsigned</span>) time(<span class="literal">NULL</span>));</span><br><span class="line">    	r = radius;</span><br><span class="line">    	x = x_center;</span><br><span class="line">    	y = y_center;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; <span class="title">randPoint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">double</span> theta = <span class="number">2</span> * M_PI * (<span class="keyword">double</span>)rand() / RAND_MAX;</span><br><span class="line">    	<span class="keyword">double</span> tmpR = r * <span class="built_in">sqrt</span>((<span class="keyword">double</span>)rand() / RAND_MAX);</span><br><span class="line">    	<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; result;</span><br><span class="line">    	result.push_back(x + tmpR * <span class="built_in">cos</span>(theta));</span><br><span class="line">    	result.push_back(y + tmpR * <span class="built_in">sin</span>(theta));</span><br><span class="line">    	<span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Leading Werido</p>
  <div class="site-description" itemprop="description">笔记记录</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">38</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Leading Werido</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/canvas_sphere.min.js"></script>


  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://leadingWerido.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
